# Car Rental Backend API

## ðŸš€ Quick Start

### 1. Install Dependencies
```bash
cd backend
npm install
```

### 2. Install MongoDB
**Windows:**
- Download MongoDB from https://www.mongodb.com/try/download/community
- Install and start MongoDB service
- Default connection: `mongodb://localhost:27017`

**Or use MongoDB Atlas (Cloud):**
- Create free account at https://www.mongodb.com/cloud/atlas
- Create cluster and get connection string
- Update `MONGODB_URI` in `.env`

### 3. Configure Environment
Update `.env` file with your settings

### 4. Start Server
```bash
# Development mode with auto-restart
npm run dev

# Production mode
npm start
```

Server will run at: `http://localhost:5000`

---

## ðŸ“¡ API Endpoints

### Authentication
- `POST /api/auth/signup` - Register new user
- `POST /api/auth/login` - Login user
- `GET /api/auth/me` - Get current user (Protected)

### Cars
- `GET /api/cars` - Get all cars (Public)
- `GET /api/cars/:id` - Get single car (Public)
- `POST /api/cars` - Create car (Owner/Admin)
- `PUT /api/cars/:id` - Update car (Owner/Admin)
- `DELETE /api/cars/:id` - Delete car (Owner/Admin)

### Bookings
- `GET /api/bookings` - Get user's bookings (Protected)
- `GET /api/bookings/:id` - Get single booking (Protected)
- `POST /api/bookings` - Create booking (Customer)
- `PUT /api/bookings/:id` - Update booking (Protected)
- `DELETE /api/bookings/:id` - Cancel booking (Protected)
- `PUT /api/bookings/:id/approve` - Approve booking (Owner/Admin)
- `PUT /api/bookings/:id/reject` - Reject booking (Owner/Admin)

### Admin
- `GET /api/admin/stats` - Dashboard statistics (Admin)
- `GET /api/admin/bookings` - All bookings (Admin)
- `GET /api/admin/users` - All users (Admin)
- `GET /api/admin/cars` - All cars (Admin)
- `PUT /api/admin/cars/:id/approve` - Approve car (Admin)
- `GET /api/admin/reports` - Generate reports (Admin)

---

## ðŸ§ª Testing with Postman/Thunder Client

### 1. Register User
```http
POST http://localhost:5000/api/auth/signup
Content-Type: application/json

{
  "name": "John Doe",
  "email": "john@example.com",
  "password": "password123",
  "phone": "1234567890",
  "role": "customer",
  "drivingLicense": "DL123456"
}
```

### 2. Login
```http
POST http://localhost:5000/api/auth/login
Content-Type: application/json

{
  "email": "john@example.com",
  "password": "password123"
}
```

Response includes `token` - use this for protected routes

### 3. Get Cars (Public)
```http
GET http://localhost:5000/api/cars
```

### 4. Create Car (Protected - Owner)
```http
POST http://localhost:5000/api/cars
Authorization: Bearer YOUR_TOKEN_HERE
Content-Type: application/json

{
  "name": "Toyota Camry 2023",
  "type": "Sedan",
  "transmission": "Automatic",
  "fuel": "Petrol",
  "seats": 5,
  "price": 50,
  "location": "Downtown",
  "features": ["AC", "GPS", "Bluetooth"],
  "description": "Comfortable sedan for city driving"
}
```

### 5. Create Booking (Protected - Customer)
```http
POST http://localhost:5000/api/bookings
Authorization: Bearer YOUR_TOKEN_HERE
Content-Type: application/json

{
  "carId": "CAR_ID_HERE",
  "startDate": "2025-01-01",
  "endDate": "2025-01-05",
  "paymentMethod": "Card",
  "notes": "Need GPS"
}
```

---

## ðŸ“¦ Project Structure

```
backend/
â”œâ”€â”€ config/
â”‚   â””â”€â”€ db.js              # Database configuration
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ User.js            # User model
â”‚   â”œâ”€â”€ Car.js             # Car model
â”‚   â””â”€â”€ Booking.js         # Booking model
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ auth.js            # Auth routes
â”‚   â”œâ”€â”€ cars.js            # Car routes
â”‚   â”œâ”€â”€ bookings.js        # Booking routes
â”‚   â””â”€â”€ admin.js           # Admin routes
â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ authController.js      # Auth logic
â”‚   â”œâ”€â”€ carController.js       # Car logic
â”‚   â”œâ”€â”€ bookingController.js   # Booking logic
â”‚   â””â”€â”€ adminController.js     # Admin logic
â”œâ”€â”€ middleware/
â”‚   â””â”€â”€ auth.js            # JWT authentication
â”œâ”€â”€ .env                   # Environment variables
â”œâ”€â”€ .gitignore            # Git ignore file
â”œâ”€â”€ server.js             # Entry point
â””â”€â”€ package.json          # Dependencies

```

---

## ðŸ”’ Authentication

All protected routes require JWT token in header:
```
Authorization: Bearer YOUR_JWT_TOKEN
```

---

## âœ… Backend Complete!

Your backend is now ready with:
- âœ… User authentication (JWT)
- âœ… Role-based access (Customer, Owner, Admin)
- âœ… Car management
- âœ… Booking system
- âœ… Admin dashboard
- âœ… MongoDB integration

**Next Step:** Install dependencies and start the server!
```bash
npm install
npm run dev
```
